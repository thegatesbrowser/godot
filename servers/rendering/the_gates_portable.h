#ifndef THE_GATES_PORTABLE_H
#define THE_GATES_PORTABLE_H

#ifdef WINDOWS_ENABLED

#ifdef _WIN64
    typedef long long LONG_PTR;
#else
    typedef long LONG_PTR;
#endif

typedef void* FileHandle;
#define FileHandleInvalid ((FileHandle)(LONG_PTR)-1)

#define vkGetMemoryXKHR vkGetMemoryWin32HandleKHR
#define VkMemoryGetXInfoKHR VkMemoryGetWin32HandleInfoKHR
#define VkImportMemoryXInfoKHR VkImportMemoryWin32HandleInfoKHR

#define VK_EXTERNAL_MEMORY_HANDLE_TYPE_OPAQUE_X_BIT VK_EXTERNAL_MEMORY_HANDLE_TYPE_OPAQUE_WIN32_BIT
#define VK_STRUCTURE_TYPE_MEMORY_GET_X_INFO_KHR VK_STRUCTURE_TYPE_MEMORY_GET_WIN32_HANDLE_INFO_KHR
#define VK_STRUCTURE_TYPE_EXPORT_MEMORY_X_INFO_KHR VK_STRUCTURE_TYPE_EXPORT_MEMORY_WIN32_HANDLE_INFO_KHR
#define VK_STRUCTURE_TYPE_IMPORT_MEMORY_X_INFO_KHR VK_STRUCTURE_TYPE_IMPORT_MEMORY_WIN32_HANDLE_INFO_KHR

#endif

#ifdef MACOS_ENABLED

typedef struct __IOSurface* IOSurfaceRef;
typedef IOSurfaceRef FileHandle;
#define FileHandleInvalid nullptr

#endif

#ifdef LINUXBSD_ENABLED

typedef int FileHandle;
#define FileHandleInvalid -1

#define vkGetMemoryXKHR vkGetMemoryFdKHR
#define VkMemoryGetXInfoKHR VkMemoryGetFdInfoKHR
#define VkImportMemoryXInfoKHR VkImportMemoryFdInfoKHR

#define VK_EXTERNAL_MEMORY_HANDLE_TYPE_OPAQUE_X_BIT VK_EXTERNAL_MEMORY_HANDLE_TYPE_OPAQUE_FD_BIT
#define VK_STRUCTURE_TYPE_MEMORY_GET_X_INFO_KHR VK_STRUCTURE_TYPE_MEMORY_GET_FD_INFO_KHR
#define VK_STRUCTURE_TYPE_EXPORT_MEMORY_X_INFO_KHR VK_STRUCTURE_TYPE_MEMORY_GET_FD_INFO_KHR
#define VK_STRUCTURE_TYPE_IMPORT_MEMORY_X_INFO_KHR VK_STRUCTURE_TYPE_IMPORT_MEMORY_FD_INFO_KHR

#endif

#endif // THE_GATES_PORTABLE_H